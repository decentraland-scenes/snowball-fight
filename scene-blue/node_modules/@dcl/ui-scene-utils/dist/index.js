!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("@dcl/ui-scene-utils",["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ui-utils"]={})}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,i)};function i(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}var o=function(){return(o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function n(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i}function r(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s=function(){function t(t,i){var o=this;l.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=t,this.onTimeReachedCallback=i,this.onTargetTimeReached=function(t){o.onTimeReachedCallback(),t.removeComponent(e)}}var e;return e=t,t.prototype.setCallback=function(t){this.onTimeReachedCallback=t},t=e=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}([Component("UItimerDelay")],t)}(),c=engine.getComponentGroup(s),l=function(){function t(){t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(t){var e,i;try{for(var o=r(c.entities),n=o.next();!n.done;n=o.next()){var l=n.value,u=l.getComponent(s);u.elapsedTime+=t,u.elapsedTime>=u.targetTime&&u.onTargetTimeReached(l)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},t._instance=null,t}(),u=new UICanvas;u.visible=!0;var a=new Font(Fonts.SanFrancisco),h=new Font(Fonts.SanFrancisco_Heavy),p=new Texture("https://decentraland.org/images/ui/light-atlas-v3.png"),g=new Texture("https://decentraland.org/images/ui/dark-atlas-v3.png"),f=new UIText(u);f.vAlign="center",f.hAlign="center",f.hTextAlign="center",f.vTextAlign="center",f.font=a,f.fontSize=60,f.color=new Color4(0,0,0,1),f.visible=!1,f.positionY=80;var d=new UIImage(u,p);d.hAlign="center",d.vAlign="center",d.width=400,d.height=250,d.visible=!1;var b,v,m,A,T=function(t){function e(e,i,o,n,r,s,c){var l=t.call(this)||this;return l.canvas=u,l.valueAsNum=e,l.uiText=new UIText(u),l.fixedDigits=c||null,l.uiText.value=l.toFixedLengthString(e),l.uiText.hAlign="right",l.uiText.vAlign="bottom",l.uiText.positionX=i||0,l.uiText.positionY=o||0,l.uiText.fontSize=r||25,l.uiText.font=a,l.uiText.vTextAlign="center",l.uiText.hTextAlign="center",l.uiText.color=n||Color4.White(),l.uiText.outlineColor=Color4.Black(),l.uiText.outlineWidth=s?0:.1,l}return i(e,t),e.prototype.read=function(){return this.valueAsNum},e.prototype.increase=function(t){this.valueAsNum+=t||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.decrease=function(t){this.valueAsNum-=t||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.set=function(t){this.valueAsNum=t,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.toFixedLengthString=function(t){var e=t.toString();if(!this.fixedDigits)return e;for(var i=e.length-this.fixedDigits;i<0;)e="0".concat(e),i+=1;return i>0&&(e=t.toPrecision(this.fixedDigits)),e},e}(Entity);(b=t.PromptStyles||(t.PromptStyles={})).LIGHT="light",b.DARK="dark",b.LIGHTLARGE="lightlarge",b.DARKLARGE="darklarge",b.LIGHTSLANTED="lightslanted",b.DARKSLANTED="darkslanted",(v=t.BarStyles||(t.BarStyles={})).ROUNDBLACK="roundblack",v.ROUNDWHITE="roundwhite",v.ROUNDSILVER="roundsilver",v.ROUNDGOLD="roundgold",v.SQUAREBLACK="squareblack",v.SQUAREWHITE="squarewhite",v.SQUARESILVER="squaresilver",v.SQUAREGOLD="squaregold",(m=t.ButtonStyles||(t.ButtonStyles={})).E="e",m.F="f",m.DARK="dark",m.RED="red",m.ROUNDBLACK="roundblack",m.ROUNDWHITE="roundwhite",m.ROUNDSILVER="roundsilver",m.ROUNDGOLD="roundgold",m.SQUAREBLACK="squareblack",m.SQUAREWHITE="squarewhite",m.SQUARESILVER="squaresilver",m.SQUAREGOLD="squaregold",(A=t.SwitchStyles||(t.SwitchStyles={})).ROUNDGREEN="roundgreen",A.ROUNDRED="roundred",A.SQUAREGREEN="squaregreen",A.SQUARERED="squarered";var x={buttonE:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},buttonF:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},white:{sourceWidth:174,sourceHeight:46,sourceLeft:698,sourceTop:662},buttonRed:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},buttonDark:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},roundBlack:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:458},squareBlack:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:457},roundWhite:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:494},squareWhite:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:493},roundSilver:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:531},squareSilver:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:531},roundGold:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:567},squareGold:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:567}},I={E:{sourceWidth:26,sourceHeight:26,sourceLeft:697,sourceTop:611},F:{sourceWidth:26,sourceHeight:26,sourceLeft:733,sourceTop:611},EBlack:{sourceWidth:26,sourceHeight:26,sourceLeft:766,sourceTop:611},FBlack:{sourceWidth:26,sourceHeight:26,sourceLeft:802,sourceTop:611}},w={promptBackground:{sourceWidth:416,sourceHeight:352,sourceLeft:501,sourceTop:12},promptLargeBackground:{sourceWidth:480,sourceHeight:384,sourceLeft:7,sourceTop:12},promptSlantedBackground:{sourceWidth:486,sourceHeight:326,sourceLeft:7,sourceTop:413},NPCDialog:{sourceWidth:766,sourceHeight:248,sourceLeft:22,sourceTop:756}},k={closeW:{sourceWidth:32,sourceHeight:32,sourceLeft:942,sourceTop:306},closeD:{sourceWidth:32,sourceHeight:32,sourceLeft:986,sourceTop:306},closeWLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:512,sourceTop:381},closeDLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:583,sourceTop:381},closeWNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:252},closeDNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:214},closeWNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:214},closeDNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:260},FDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:4},FWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:4},EDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:40},EWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:40},Timer:{sourceWidth:24,sourceHeight:32.2,sourceLeft:718,sourceTop:388},TimerLarge:{sourceWidth:48,sourceHeight:68,sourceLeft:662,sourceTop:386},ClickWhite:{sourceWidth:32,sourceHeight:48,sourceLeft:799,sourceTop:389},ClickDark:{sourceWidth:32,sourceHeight:48,sourceLeft:757,sourceTop:389}},y={wOff:{sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:76},wOn:{sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:104},dOff:{sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:76},dOn:{sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:104},wLargeOff:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:132},wLargeOn:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:168},dLargeOff:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:132},dLargeOn:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:168}},L={roundOff:{sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:454},roundRed:{sourceWidth:64,sourceHeight:32,sourceLeft:853,sourceTop:454},roundGreen:{sourceWidth:64,sourceHeight:32,sourceLeft:923,sourceTop:454},squareOff:{sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:501},squareRed:{sourceWidth:64,sourceHeight:32,sourceLeft:852,sourceTop:501},squareGreen:{sourceWidth:64,sourceHeight:32,sourceLeft:921,sourceTop:501}};function S(t,e){t.sourceWidth=e.sourceWidth,t.sourceHeight=e.sourceHeight,t.sourceLeft=e.sourceLeft?e.sourceLeft:0,t.sourceTop=e.sourceTop?e.sourceTop:0}function C(t){var e=-10-4*t;return e>-65?e:-65}var E=function(e){function o(i,o,n,r,s,c,l){var a=e.call(this)||this;if(a.canvas=u,a.valueAsNum=i>1?1:i,a.fullWidth=c?128*c:128,a.background=new UIImage(u,p),a.background.width=c?128*c:128,a.background.height=c?32*c:32,a.background.hAlign="right",a.background.vAlign="bottom",a.background.positionX=o||0,a.background.positionY=n||0,s)switch(s){case t.BarStyles.ROUNDBLACK:S(a.background,x.roundBlack);break;case t.BarStyles.ROUNDWHITE:S(a.background,x.roundWhite);break;case t.BarStyles.ROUNDSILVER:S(a.background,x.roundSilver);break;case t.BarStyles.ROUNDGOLD:S(a.background,x.roundGold);break;case t.BarStyles.SQUAREBLACK:S(a.background,x.squareBlack);break;case t.BarStyles.SQUAREWHITE:S(a.background,x.squareWhite);break;case t.BarStyles.SQUARESILVER:S(a.background,x.squareSilver);break;case t.BarStyles.SQUAREGOLD:S(a.background,x.squareGold)}else S(a.background,x.roundSilver);return a.background.sourceWidth=128,a.background.sourceHeight=32,a.background.visible=!0,a.bar=new UIContainerRect(a.background),a.bar.color=r||Color4.Red(),a.bar.thickness=0,a.bar.hAlign="left",a.bar.vAlign="center",a.bar.positionX=c?2.55*c:2.55,a.bar.positionY=0,a.bar.height=c?32*c-7.5*c:24.5,a.bar.width=c?a.fullWidth*a.valueAsNum-5.1*c:a.fullWidth*a.valueAsNum-5.1,l&&a.hide(),a}return i(o,e),o.prototype.read=function(){return this.valueAsNum},o.prototype.increase=function(t){this.valueAsNum+=t||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.decrease=function(t){this.valueAsNum-=t||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.set=function(t){this.valueAsNum=t,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.hide=function(){this.background.visible=!1,this.bar.visible=!1},o.prototype.show=function(){this.background.visible=!0,this.bar.visible=!0},o}(Entity),B=function(t){function e(e,i,o,n,r,s){var c=t.call(this)||this;c.canvas=u;var l=new Texture(e);return c.image=new UIImage(u,l),c.image.hAlign="right",c.image.vAlign="bottom",c.image.positionX=i||0,c.image.positionY=o||0,c.image.width=n||64,c.image.height=r||64,c.image.sourceLeft=s&&s.sourceLeft?s.sourceLeft:0,c.image.sourceTop=s&&s.sourceTop?s.sourceTop:0,c.image.sourceWidth=s&&s.sourceWidth?s.sourceWidth:n||64,c.image.sourceHeight=s&&s.sourceHeight?s.sourceHeight:r||64,c}return i(e,t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(t){var e=this;if(this.image.visible=!0,t){var i=new Entity;engine.addEntity(i),i.addComponentOrReplace(new s(t,(function(){e.hide()})))}},e}(Entity),O=function(t){function e(e,i,o,n,r,s){var c=t.call(this)||this;c.canvas=u;var l=new Texture(e);return c.image=new UIImage(u,l),c.image.hAlign="right",c.image.vAlign="bottom",c.image.positionX=i||0,c.image.positionY=o||0,c.image.width=n||32,c.image.height=r||32,c.image.sourceLeft=s&&s.sourceLeft?s.sourceLeft:0,c.image.sourceTop=s&&s.sourceTop?s.sourceTop:0,c.image.sourceWidth=s?s.sourceWidth:n||32,c.image.sourceHeight=s?s.sourceHeight:r||32,c}return i(e,t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(t){var e=this;if(this.image.visible=!0,t){var i=new Entity;engine.addEntity(i),i.addComponentOrReplace(new s(t,(function(){e.hide()})))}},e}(Entity),U=function(t){function e(e,i,o,n,r,s){var c=t.call(this)||this;c.canvas=u;var l=new Texture(e);return c.image=new UIImage(u,l),c.image.hAlign="right",c.image.vAlign="bottom",c.image.positionX=i||0,c.image.positionY=o||0,c.image.width=n||128,c.image.height=r||128,c.image.sourceLeft=s&&s.sourceLeft?s.sourceLeft:0,c.image.sourceTop=s&&s.sourceTop?s.sourceTop:0,c.image.sourceWidth=s?s.sourceWidth:n||128,c.image.sourceHeight=s?s.sourceHeight:r||128,c}return i(e,t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(t){var e=this;if(this.image.visible=!0,t){var i=new Entity;engine.addEntity(i),i.addComponentOrReplace(new s(t,(function(){e.hide()})))}},e}(Entity),W=function(t){function e(e,i,o,n,r,c,l,a){var h=t.call(this)||this;h.canvas=u;var p=new Texture(e);if(h.image=new UIImage(u,p),h.image.hAlign="center",h.image.vAlign="center",h.image.positionX=n||0,h.image.positionY=r||0,h.image.width=c||512,h.image.height=l||512,h.image.sourceLeft=a&&a.sourceLeft?a.sourceLeft:0,h.image.sourceTop=a&&a.sourceTop?a.sourceTop:0,h.image.sourceWidth=a?a.sourceWidth:c||512,h.image.sourceHeight=a?a.sourceHeight:l||512,h.image.visible=!o,-1!=i){var g=new Entity;engine.addEntity(g),g.addComponentOrReplace(new s(i||3,(function(){h.hide()})))}return h}return i(e,t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(t){var e=this;if(this.image.visible=!0,t){var i=new Entity;engine.addEntity(i),i.addComponentOrReplace(new s(t,(function(){e.hide()})))}},e}(Entity),R=function(t){function e(e,i,o,n){var r=t.call(this)||this;r.canvas=u,r.background=d,r.UIOpenTime=+Date.now(),r.onAccept=i||null;var s=n?g:p;return d.source=s,d.width=400,d.height=250,d.positionY=0,S(d,w.promptBackground),d.visible=!0,r.closeIcon=new UIImage(d,s),r.closeIcon.positionX=175,r.closeIcon.positionY=100,r.closeIcon.width=32,r.closeIcon.height=32,S(r.closeIcon,n?k.closeW:k.closeD),r.closeIcon.onClick=new OnClick((function(){r.close()})),r.text=new UIText(d),r.text.value=e,r.text.adaptWidth=!1,r.text.textWrapping=!0,r.text.width=380,r.text.hAlign="center",r.text.vAlign="top",r.text.positionX=0,r.text.positionY=-65,r.text.fontSize=24,r.text.font=a,r.text.vTextAlign="center",r.text.hTextAlign="center",r.text.color=n?Color4.White():Color4.Black(),r.button=new UIImage(d,s),r.button.positionX=0,r.button.positionY=-60,r.button.width=174,r.button.height=46,S(r.button,x.buttonE),r.icon=new UIImage(r.button,1==n?g:p),r.icon.width=26,r.icon.height=26,r.icon.hAlign="center",r.icon.vAlign="center",r.icon.isPointerBlocker=!1,S(r.icon,I.E),r.icon.positionX=C(o?o.length:2),r.buttonLabel=new UIText(r.button),r.buttonLabel.value=o||"Ok",r.buttonLabel.hTextAlign="center",r.buttonLabel.vTextAlign="center",r.buttonLabel.positionX=30,r.buttonLabel.fontSize=18,r.buttonLabel.font=a,r.buttonLabel.color=Color4.White(),r.buttonLabel.isPointerBlocker=!1,r.button.onClick=new OnClick((function(){r.accept()})),r.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(t){r.button.visible&&+Date.now()-r.UIOpenTime>100&&r.accept()})),r}return i(e,t),e.prototype.close=function(){d.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.close()},e.prototype.hide=function(){d.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.show=function(){d.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0},e}(Entity),D=function(t){function e(e,i,o,n,r,s,c){var l=t.call(this)||this;l.canvas=u,l.background=d,l.UIOpenTime=+Date.now(),l.onAccept=o,l.onReject=n||null;var f=c?g:p;return d.source=f,d.width=480,d.height=384,S(d,w.promptLargeBackground),d.visible=!0,l.closeIcon=new UIImage(d,f),l.closeIcon.positionX=215,l.closeIcon.positionY=164,l.closeIcon.width=32,l.closeIcon.height=32,S(l.closeIcon,c?k.closeW:k.closeD),l.closeIcon.onClick=new OnClick((function(){l.close()})),l.title=new UIText(d),l.title.value=e,l.title.adaptWidth=!1,l.title.textWrapping=!0,l.title.width=380,l.title.hAlign="center",l.title.vAlign="top",l.title.positionX=0,l.title.positionY=-20,l.title.font=h,l.title.fontSize=24,l.title.vTextAlign="center",l.title.hTextAlign="center",l.title.color=c?Color4.White():Color4.Black(),l.text=new UIText(d),l.text.value=i,l.text.adaptWidth=!1,l.text.textWrapping=!0,l.text.width=380,l.text.hAlign="center",l.text.vAlign="top",l.text.positionX=0,l.text.positionY=-145,l.text.fontSize=24,l.text.font=a,l.text.vTextAlign="center",l.text.hTextAlign="center",l.text.color=c?Color4.White():Color4.Black(),l.buttonE=new UIImage(d,f),l.buttonE.positionX=-100,l.buttonE.positionY=-120,l.buttonE.width=174,l.buttonE.height=46,S(l.buttonE,x.buttonE),l.buttonEIcon=new UIImage(l.buttonE,1==c?g:p),l.buttonEIcon.width=26,l.buttonEIcon.height=26,l.buttonEIcon.hAlign="center",l.buttonEIcon.vAlign="center",l.buttonEIcon.isPointerBlocker=!1,S(l.buttonEIcon,I.E),l.buttonEIcon.positionX=C(r?r.length:2),l.buttonELabel=new UIText(l.buttonE),l.buttonELabel.value=r||"Ok",l.buttonELabel.hTextAlign="center",l.buttonELabel.vTextAlign="center",l.buttonELabel.positionX=30,l.buttonELabel.fontSize=18,l.buttonELabel.font=a,l.buttonELabel.color=Color4.White(),l.buttonELabel.isPointerBlocker=!1,l.buttonE.onClick=new OnClick((function(){l.accept()})),l.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(t){l.buttonE.visible&&+Date.now()-l.UIOpenTime>100&&l.accept()})),l.buttonF=new UIImage(d,f),l.buttonF.positionX=100,l.buttonF.positionY=-120,l.buttonF.width=174,l.buttonF.height=46,S(l.buttonF,x.buttonF),l.buttonFIcon=new UIImage(l.buttonF,1==c?g:p),l.buttonFIcon.width=26,l.buttonFIcon.height=26,l.buttonFIcon.hAlign="center",l.buttonFIcon.vAlign="center",l.buttonFIcon.isPointerBlocker=!1,S(l.buttonFIcon,I.F),l.buttonFIcon.positionX=C(s?s.length:6),l.buttonFLabel=new UIText(l.buttonF),l.buttonFLabel.value=s||"Cancel",l.buttonFLabel.hTextAlign="center",l.buttonFLabel.vTextAlign="center",l.buttonFLabel.positionX=30,l.buttonFLabel.fontSize=18,l.buttonFLabel.font=a,l.buttonFLabel.color=Color4.White(),l.buttonFLabel.isPointerBlocker=!1,l.buttonF.onClick=new OnClick((function(){l.reject()})),l.FButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(t){l.buttonF.visible&&+Date.now()-l.UIOpenTime>100&&l.reject()})),l}return i(e,t),e.prototype.close=function(){d.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.title.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.close()},e.prototype.reject=function(){this.onReject&&this.onReject(),this.close()},e.prototype.hide=function(){d.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.buttonEIcon.visible=!1,this.buttonFIcon.visible=!1},e.prototype.show=function(){d.visible=!0,this.closeIcon.visible=!0,this.buttonE.visible=!0,this.buttonF.visible=!0,this.text.visible=!0,this.buttonELabel.visible=!0,this.buttonFLabel.visible=!0,this.buttonEIcon.visible=!0,this.buttonFIcon.visible=!0},e}(Entity),H=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;s.canvas=u,s.background=d,s.UIOpenTime=+Date.now(),s.onAccept=i;var c=r?g:p;d.source=c,d.width=400,d.height=250,S(d,w.promptBackground),d.visible=!0,s.text=new UIText(d),s.text.value=e,s.text.adaptWidth=!1,s.text.textWrapping=!0,s.text.width=320,s.text.hAlign="center",s.text.vAlign="top",s.text.positionX=0,s.text.positionY=-20,s.text.fontSize=24,s.text.font=h,s.text.vTextAlign="center",s.text.hTextAlign="center",s.text.color=r?Color4.White():Color4.Black(),s.closeIcon=new UIImage(d,c),s.closeIcon.positionX=175,s.closeIcon.positionY=100,s.closeIcon.width=32,s.closeIcon.height=32,S(s.closeIcon,r?k.closeW:k.closeD),s.closeIcon.onClick=new OnClick((function(){s.hide()})),s.button=new UIImage(d,c),s.button.positionX=0,s.button.positionY=-60,s.button.width=174,s.button.height=46,S(s.button,x.buttonE),s.icon=new UIImage(s.button,1==r?g:p),s.icon.width=26,s.icon.height=26,s.icon.hAlign="center",s.icon.vAlign="center",s.icon.isPointerBlocker=!1,S(s.icon,I.E),s.icon.positionX=C(o?o.length:6),s.buttonLabel=new UIText(s.button),s.buttonLabel.value=o||"Submit",s.buttonLabel.hTextAlign="center",s.buttonLabel.vTextAlign="center",s.buttonLabel.positionX=30,s.buttonLabel.fontSize=18,s.buttonLabel.font=a,s.buttonLabel.color=Color4.White(),s.buttonLabel.isPointerBlocker=!1,s.fillInBox=new UIInputText(d),s.fillInBox.color=Color4.Black(),s.fillInBox.font=a,s.fillInBox.width=312,s.fillInBox.height=46,s.fillInBox.positionX=0,s.fillInBox.positionY=15,s.fillInBox.placeholder=n||"Fill in",s.fillInBox.hTextAlign="center",s.fillInBox.vTextAlign="center",s.fillInBox.fontSize=22;var l="";return s.fillInBox.onChanged=new OnChanged((function(t){l=t.value})),s.fillInBox.onTextSubmit=new OnTextSubmit((function(t){s.accept(l)})),s.button.onClick=new OnClick((function(){s.accept(l)})),s.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(t){s.button.visible&&+Date.now()-s.UIOpenTime>100&&s.accept(l)})),s}return i(e,t),e.prototype.close=function(){d.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.accept=function(t){this.onAccept(t),this.close()},e.prototype.hide=function(){d.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.show=function(){d.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,this.fillInBox.visible=!0},e}(Entity),F=function(e){function o(i,o,n,r){var s=e.call(this)||this;switch(s.elements=[],s.texture=p,s.darkTheme=!1,s.background=new UIImage(u,p),s.closeIcon=new UIImage(s.background,s.texture),s.UIOpenTime=0,s.canvas=u,s.UIOpenTime=+Date.now(),s.background=new UIImage(u,p),s.background.hAlign="center",s.background.vAlign="center",i||(i=t.PromptStyles.LIGHT),i){case t.PromptStyles.LIGHT:s.texture=p,S(s.background,w.promptBackground),S(s.closeIcon,k.closeD),s.closeIcon.positionX=o?o/2-25:175,s.closeIcon.positionY=n?n/2-25:145;break;case t.PromptStyles.DARK:s.texture=g,s.darkTheme=!0,S(s.background,w.promptBackground),S(s.closeIcon,k.closeW),s.closeIcon.positionX=o?o/2-25:175,s.closeIcon.positionY=n?n/2-25:145;break;case t.PromptStyles.LIGHTLARGE:s.texture=p,S(s.background,w.promptLargeBackground),S(s.closeIcon,k.closeD),s.closeIcon.positionX=o?o/2-25:215,s.closeIcon.positionY=n?n/2-25:165;break;case t.PromptStyles.DARKLARGE:s.texture=g,s.darkTheme=!0,S(s.background,w.promptLargeBackground),S(s.closeIcon,k.closeW),s.closeIcon.positionX=o?o/2-25:215,s.closeIcon.positionY=n?n/2-25:165;break;case t.PromptStyles.LIGHTSLANTED:s.texture=p,S(s.background,w.promptSlantedBackground),S(s.closeIcon,k.closeD),s.closeIcon.positionX=o?o/2-25:215,s.closeIcon.positionY=n?n/2-25:138;break;case t.PromptStyles.DARKSLANTED:s.texture=g,s.darkTheme=!0,S(s.background,w.promptSlantedBackground),S(s.closeIcon,k.closeW),s.closeIcon.positionX=o?o/2-25:215,s.closeIcon.positionY=n?n/2-25:138;break;default:s.texture=new Texture(i),s.closeIcon.visible=!1}return s.background.source=s.texture,s.background.width=o||s.background.sourceWidth,s.background.height=n||s.background.sourceHeight,s.background.visible=!0,s.closeIcon.width=32,s.closeIcon.height=32,s.closeIcon.source=s.texture,s.closeIcon.onClick=new OnClick((function(){s.hide()})),r&&s.hide(),s}return i(o,e),o.prototype.hide=function(){var t,e;this.background.visible=!1,this.closeIcon.visible=!1;try{for(var i=r(this.elements),o=i.next();!o.done;o=i.next()){o.value.hide()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},o.prototype.show=function(){var t,e;this.background.visible=!0,this.closeIcon.visible=!0;try{for(var i=r(this.elements),o=i.next();!o.done;o=i.next()){o.value.show()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},o.prototype.addText=function(t,e,i,o,n){var r=new z(this,t,e,i,this.darkTheme,o||void 0,n||void 0);return this.elements.push(r),r},o.prototype.addButton=function(t,e,i,o,n){var r=new P(this,this.texture,this.UIOpenTime,t,e,i,o,n||void 0);return this.elements.push(r),r},o.prototype.addCheckbox=function(t,e,i,o,n,r,s){var c=new N(this,this.texture,this.darkTheme,t,e,i,o||void 0,n||void 0,r||void 0,s||void 0);return this.elements.push(c),c},o.prototype.addSwitch=function(t,e,i,o,n,r,s){var c=new X(this,this.texture,this.darkTheme,t,e,i,o||void 0,n||void 0,r||void 0,s||void 0);return this.elements.push(c),c},o.prototype.addIcon=function(t,e,i,o,n,r){var s=new Texture(t),c=new Y(this,s,e,i,o||void 0,n||void 0,r||void 0);return this.elements.push(c),c},o.prototype.addTextBox=function(t,e,i,o){var n=new G(this,t,e,i||void 0,o||void 0);return this.elements.push(n),n},o}(Entity),P=function(e){function o(i,o,n,r,s,c,l,u){var h=e.call(this)||this;if(h.icon=null,h.image=new UIImage(i.background,o),h.image.positionX=s,h.image.positionY=c,h.image.width=174,h.image.height=46,h.label=new UIText(h.image),u)switch(u){case t.ButtonStyles.E:S(h.image,x.buttonE),h.label.positionX=25,h.icon=new UIImage(h.image,o),h.icon.width=26,h.icon.height=26,h.icon.hAlign="center",h.icon.vAlign="center",h.icon.isPointerBlocker=!1,S(h.icon,I.E),h.icon.positionX=C(r.length);break;case t.ButtonStyles.F:S(h.image,x.buttonF),h.label.positionX=25,h.icon=new UIImage(h.image,o),h.icon.width=26,h.icon.height=26,h.icon.hAlign="center",h.icon.vAlign="center",h.icon.isPointerBlocker=!1,S(h.icon,I.F),h.icon.positionX=C(r.length);break;case t.ButtonStyles.RED:S(h.image,x.buttonRed);break;case t.ButtonStyles.DARK:S(h.image,x.buttonDark);break;case t.ButtonStyles.ROUNDBLACK:S(h.image,x.roundBlack);break;case t.ButtonStyles.ROUNDWHITE:S(h.image,x.roundWhite);break;case t.ButtonStyles.ROUNDSILVER:S(h.image,x.roundSilver);break;case t.ButtonStyles.ROUNDGOLD:S(h.image,x.roundGold);break;case t.ButtonStyles.SQUAREBLACK:S(h.image,x.squareBlack);break;case t.ButtonStyles.SQUAREWHITE:S(h.image,x.squareWhite);break;case t.ButtonStyles.SQUARESILVER:S(h.image,x.squareSilver);break;case t.ButtonStyles.SQUAREGOLD:S(h.image,x.squareGold);break;default:S(h.image,x.roundSilver)}else S(h.image,x.roundSilver);return h.label.value=r,h.label.hTextAlign="center",h.label.vTextAlign="center",h.label.fontSize=20,h.label.font=a,h.label.color=u==t.ButtonStyles.ROUNDWHITE||u==t.ButtonStyles.SQUAREWHITE?Color4.Black():Color4.White(),h.label.isPointerBlocker=!1,h.image.onClick=new OnClick((function(){l()})),u==t.ButtonStyles.E?Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(t){h.image.visible&&+Date.now()-n>100&&l()})):u==t.ButtonStyles.F&&Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(t){h.image.visible&&+Date.now()-n>100&&l()})),h}return i(o,e),o.prototype.hide=function(){this.image.visible=!1},o.prototype.show=function(){this.image.visible=!0},o.prototype.grayOut=function(){this.label.color=Color4.Gray(),this.image.isPointerBlocker=!1,this.icon&&(this.icon.visible=!1)},o.prototype.enable=function(){this.label.color=Color4.White(),this.image.isPointerBlocker=!0,this.icon&&(this.icon.visible=!0)},o}(Entity),N=function(t){function e(e,i,o,n,r,s,c,l,u,h){var p=t.call(this)||this;return p.checked=!!h,p.darkTheme=o,p.large=u||!1,p.image=new UIImage(e.background,i),p.image.positionX=r,p.image.positionY=s,p.image.width=u?32:24,p.image.height=u?32:24,0==p.checked?p.uncheck():p.check(),p.label=new UIText(p.image),p.label.positionX=u?40:30,p.label.color=o?Color4.White():Color4.Black(),p.label.value=n,p.label.hTextAlign="left",p.label.vTextAlign="center",p.label.fontSize=20,p.label.font=a,p.label.isPointerBlocker=!1,p.image.onClick=new OnClick((function(){0==p.checked?p.check():p.uncheck(),p.checked?c&&c():l&&l()})),p}return i(e,t),e.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},e.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},e.prototype.uncheck=function(){this.checked=!1,this.darkTheme?this.large?S(this.image,y.wLargeOff):S(this.image,y.wOff):this.large?S(this.image,y.dLargeOff):S(this.image,y.dOff)},e.prototype.check=function(){this.checked=!0,this.darkTheme?this.large?S(this.image,y.wLargeOn):S(this.image,y.wOn):this.large?S(this.image,y.dLargeOn):S(this.image,y.dOn)},e}(Entity),X=function(e){function o(i,o,n,r,s,c,l,u,h,p){var g=e.call(this)||this;return g.checked=!!p,g.darkTheme=n,g.style=h||t.SwitchStyles.ROUNDGREEN,g.image=new UIImage(i.background,o),g.image.positionX=s,g.image.positionY=c,g.image.width=64,g.image.height=32,0==g.checked?g.check():g.uncheck(),g.label=new UIText(g.image),g.label.positionX=80,g.label.color=n?Color4.White():Color4.Black(),g.label.value=r,g.label.hTextAlign="left",g.label.vTextAlign="center",g.label.fontSize=20,g.label.font=a,g.label.isPointerBlocker=!1,g.image.onClick=new OnClick((function(){0==g.checked?g.check():g.uncheck(),g.checked?l&&l():u&&u()})),g}return i(o,e),o.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},o.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},o.prototype.check=function(){switch(this.checked=!0,this.style){case t.SwitchStyles.ROUNDGREEN:S(this.image,L.roundGreen);break;case t.SwitchStyles.ROUNDRED:S(this.image,L.roundRed);break;case t.SwitchStyles.SQUAREGREEN:S(this.image,L.squareGreen);break;case t.SwitchStyles.SQUARERED:S(this.image,L.squareRed)}},o.prototype.uncheck=function(){this.checked=!1,this.style==t.SwitchStyles.ROUNDGREEN||this.style==t.SwitchStyles.ROUNDRED?S(this.image,L.roundOff):S(this.image,L.squareOff)},o}(Entity),Y=function(t){function e(e,i,o,n,r,s,c){var l=t.call(this)||this;return l.image=new UIImage(e.background,i),l.image.positionX=o,l.image.positionY=n,l.image.width=r||128,l.image.height=s||128,l.image.sourceLeft=c&&c.sourceLeft?c.sourceLeft:0,l.image.sourceTop=c&&c.sourceTop?c.sourceTop:0,l.image.sourceWidth=c&&c.sourceWidth?c.sourceWidth:r||128,l.image.sourceHeight=c&&c.sourceHeight?c.sourceHeight:s||128,l}return i(e,t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity),z=function(t){function e(e,i,o,n,r,s,c){var l=t.call(this)||this;return l.text=new UIText(e.background),l.text.value=i,l.text.positionX=o||0,l.text.positionY=n||0,l.text.hTextAlign="center",l.text.color=s||(r?Color4.White():Color4.Black()),l.text.fontSize=c||15,l}return i(e,t),e.prototype.hide=function(){this.text.visible=!1},e.prototype.show=function(){this.text.visible=!0},e}(Entity),G=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.currentText="",s.fillInBox=new UIInputText(e.background),s.fillInBox.color=Color4.Black(),s.fillInBox.font=a,s.fillInBox.width=312,s.fillInBox.height=46,s.fillInBox.positionX=i,s.fillInBox.positionY=o,s.fillInBox.placeholder=n||"Fill in",s.fillInBox.hTextAlign="center",s.fillInBox.vTextAlign="center",s.fillInBox.fontSize=22,s.fillInBox.onChanged=new OnChanged((function(t){s.fillInBox&&!s.fillInBox.visible||(s.currentText=t.value,r&&r(s.currentText))})),s.fillInBox.onTextSubmit=new OnTextSubmit((function(t){s.fillInBox&&!s.fillInBox.visible||(s.currentText=t.text,r&&r(s.currentText))})),s}return i(e,t),e.prototype.hide=function(){this.fillInBox.visible=!1},e.prototype.show=function(){this.fillInBox.visible=!0},e}(Entity),V=function(t){function e(e,i,o,n,r,s){var c=t.call(this)||this;return c.canvas=u,c.uiText=new UIText(u),c.uiText.value=e,c.uiText.hAlign="right",c.uiText.vAlign="bottom",c.uiText.positionX=i||0,c.uiText.positionY=o||0,c.uiText.fontSize=r||25,c.uiText.font=a,c.uiText.vTextAlign="center",c.uiText.hTextAlign="center",c.uiText.color=n||Color4.White(),c.uiText.outlineColor=Color4.Black(),c.uiText.outlineWidth=s?0:.1,c}return i(e,t),e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.set=function(t){this.uiText.value=t,this.uiText.visible=!0},e}(Entity),Q=function(t){function e(e,i,o,n){var r=t.call(this)||this;if(r.canvas=u,r.image=new UIImage(u,p),r.image.hAlign="center",r.image.vAlign="center",r.image.positionX=i||0,r.image.positionY=o?o+80:80,r.image.width=n?48*n:48,r.image.height=n?64*n:64,S(r.image,k.TimerLarge),e&&0!=e){var c=new Entity;engine.addEntity(c),c.addComponentOrReplace(new s(e||3,(function(){r.hide()})))}return r}return i(e,t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity);function q(t){return t&&"object"==typeof t&&!Array.isArray(t)}function j(t,e){var i=o({},t);return q(t)&&q(e)&&Object.keys(e).forEach((function(n){var r,s;q(e[n])?n in t?i[n]=j(t[n],e[n]):i=o(o({},i),((r={})[n]=e[n],r)):i=o(o({},i),((s={})[n]=e[n],s))})),i}var _=function(){function t(t,e){this.shape=t,e&&this.setProperties(e)}return t.prototype.setProperties=function(t){var e,i;try{for(var o=r(Object.keys(t)),n=o.next();!n.done;n=o.next()){var s=n.value;this.shape[s]=t[s]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},t.prototype.getProperty=function(t){return this.shape[t]},t}(),K=function(t){function e(i,n){var r,s,c,l,u=t.call(this,new UIInputText(i),o(o({},n),{placeholder:null!==(r=null==n?void 0:n.placeholder)&&void 0!==r?r:null==n?void 0:n.value,placeholderColor:null!==(s=null==n?void 0:n.placeholderColor)&&void 0!==s?s:null==n?void 0:n.color,onFocus:new OnFocus((function(){var t;u.isInputFocused=!0,null===(t=null==n?void 0:n.onFocus)||void 0===t||t.call(n)})),onBlur:new OnBlur((function(){var t,e;u.isInputFocused=!1,""===u.inputValue&&void 0!==u.placeholder?(u.setInputValue(u.placeholder),null===(t=null==n?void 0:n.onBlur)||void 0===t||t.call(n,!0)):null===(e=null==n?void 0:n.onBlur)||void 0===e||e.call(n,!1)})),onChanged:new OnChanged((function(t){var i,o=t.value;if(u.shape.visible)if(u.inputValue=o,o===u.placeholder)u.shape.placeholderColor=u.placeholderColor;else if(""===o&&(u.shape.placeholderColor=u.color,u.shape.placeholder=""),u.isInputFocused||""===o){var r=null!==(i=null==n?void 0:n.waitTime)&&void 0!==i?i:e.DEFAULT_WAIT_TIME;setTimeout((function(){var t;u.inputValue===o&&(null===(t=null==n?void 0:n.onChanged)||void 0===t||t.call(n,o))}),r)}})),onTextSubmit:new OnTextSubmit((function(t){var e=t.text,i=e.substr(0,e.length-1),o=null==n?void 0:n.onTextSubmit;o?o(i):setTimeout((function(){return u.shape.placeholder=i}),0)}))}))||this;return u.inputValue="",u.isInputFocused=!1,u.placeholder=u.shape.placeholder,u.color=u.shape.color,u.placeholderColor=u.shape.placeholderColor,u.inputValue=null!==(c=null==n?void 0:n.value)&&void 0!==c?c:null!==(l=null==n?void 0:n.placeholder)&&void 0!==l?l:"",u.isInputFocused=!1,u}return i(e,t),e.prototype.getValue=function(){return this.inputValue},e.prototype.isFocused=function(){return this.isInputFocused},e.prototype.setInputValue=function(t){var e=this.isInputFocused;this.isInputFocused=!1,this.shape.placeholder="",this.inputValue=this.shape.placeholder=t,this.isInputFocused=e},e.prototype.reset=function(){this.setInputValue(this.placeholder)},e.prototype.hide=function(){this.setProperties({visible:!1})},e.prototype.show=function(){this.setProperties({visible:!0}),this.setInputValue(this.inputValue)},e.DEFAULT_WAIT_TIME=650,e}(_),M=function(t){function e(e,i){var n=t.call(this,new UIContainerRect(e),o({isPointerBlocker:!0},i))||this,r=new UIImage(n.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));return r.width="100%",r.height="100%",r.sourceWidth=1,r.sourceHeight=1,r.isPointerBlocker=!0,n.image=r,(null==i?void 0:i.onClick)&&n.setOnClick(i.onClick),n}return i(e,t),e.prototype.performClick=function(){var t;null===(t=this.image.onClick)||void 0===t||t.callback({})},e.prototype.setOnClick=function(t){this.image.onClick=new OnClick(t)},e.prototype.clearOnClick=function(){this.image.onClick=null},e}(_),J=function(t){function e(i,n){var r=t.call(this,new UIContainerRect(i),o({width:"100%",vAlign:"top",visible:!1},n))||this;r.config=o(o({},e.DEFAULTS),n);var s=new M(r.shape,{width:"100%",height:"100%",color:Color4.Clear()});r.clickableContainer=s;var c=new UIImage(s.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));c.width=c.height=r.config.imageSize,c.hAlign="left",c.positionX=10,c.vAlign="center",r.image=c;var l=new UIText(s.shape);l.vAlign="top",l.hAlign="left",l.vTextAlign="top",l.fontSize=r.config.topFontSize,l.color=r.config.topTextColor,l.positionX=55,l.positionY=-10,l.isPointerBlocker=!1,r.topLeftText=l;var u=new UIText(s.shape);u.vAlign="top",u.hAlign="right",u.vTextAlign="top",u.hTextAlign="right",u.fontSize=l.fontSize,u.color=l.color,u.isPointerBlocker=!1,u.positionX=-10,u.positionY=l.positionY,r.topRightText=u;var a=new UIText(s.shape);a.vAlign="bottom",a.hAlign="left",a.vTextAlign="bottom",a.fontSize=r.config.bottomFontSize,a.color=r.config.bottomTextColor,a.positionX=l.positionX,a.positionY=10,a.isPointerBlocker=!1,r.bottomLeftText=a;var h=new UIText(s.shape);return h.vAlign="bottom",h.hAlign="right",h.vTextAlign="bottom",h.hTextAlign="right",h.fontSize=a.fontSize,h.color=a.color,h.isPointerBlocker=!1,h.positionX=u.positionX,h.positionY=a.positionY,r.bottomRightText=h,r}return i(e,t),e.prototype.setOption=function(t,e){this.image.visible=!1,this.topRightText.visible=!1,this.bottomLeftText.visible=!1,this.bottomRightText.visible=!1,t.image?(this.image.source=new Texture(t.image.src),this.image.sourceWidth=t.image.sourceWidth,this.image.sourceHeight=t.image.sourceHeight,this.image.visible=!0,this.topLeftText.positionX=this.config.imageSize+20):this.topLeftText.positionX=10,"string"==typeof t.visualText?(this.topLeftText.value=t.visualText,this.topLeftText.vAlign=this.topLeftText.vTextAlign="center",this.topLeftText.positionY=0):"text"in t.visualText?(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=t.visualText.text,this.bottomLeftText.value=t.visualText.subText,this.bottomLeftText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX):"bottomLeft"in t.visualText&&(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=t.visualText.topLeft,this.topRightText.value=t.visualText.topRight,this.bottomLeftText.value=t.visualText.bottomLeft,this.bottomRightText.value=t.visualText.bottomRight,this.topRightText.visible=!0,this.bottomLeftText.visible=!0,this.bottomRightText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX),e?this.clickableContainer.setOnClick(e):this.clickableContainer.clearOnClick()},e.prototype.setProperties=function(e){t.prototype.setProperties.call(this,e)},e.prototype.getProperty=function(e){return t.prototype.getProperty.call(this,e)},e.prototype.performClick=function(){this.clickableContainer.performClick()},e.DEFAULTS={topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},e}(_),Z=function(t){function e(i,r,s,c){var l=t.call(this,new UIContainerRect(i),o({},s))||this;l.onSuccessfulSelection=c,l.uiOptions=[],l.options={},s.visible,s.opacity,s.hAlign,s.vAlign,s.positionX,s.positionY;var u=n(s,["visible","opacity","hAlign","vAlign","positionX","positionY"]);l.config=j(e.DEFAULTS,u),l.setProperties({width:l.config.width,height:l.config.initialHeight,color:l.config.borderColor}),l.setItems(r.items,r.dropdownDefaultItemIds);var a=new UIContainerRect(l.shape);a.color=l.config.backgroundColor,a.width=l.config.width-2*l.config.borderSize,a.height=l.config.initialHeight-2*l.config.borderSize,l.insideContainer=a;var h=new K(a,{vAlign:"top",hTextAlign:"left",vTextAlign:"center",width:"92%",fontSize:l.config.search.fontSize,placeholder:l.config.search.placeholder.defaultText,placeholderColor:l.config.search.placeholder.textColor,color:l.config.search.textColor,focusedBackground:Color4.Clear(),background:Color4.Clear(),height:.95*l.config.initialHeight,onBlur:function(){return l.close()},onTextSubmit:function(){l.uiOptions[0].getProperty("visible")?l.uiOptions[0].performClick():l.close()},onChanged:function(t){if(l.hideAllOptions(),t===l.config.search.placeholder.defaultText||""===t)l.showDefaultOptions();else{var e=t.toLowerCase(),i=[];for(var o in l.options){var n=l.options[o];if(n.searchBy.toLowerCase().indexOf(e)>=0&&(i.push(n),i.length===l.config.options.maxVisibleOptions))break}i.length>0?l.showOptions(i):l.showErrorMessage("Sorry, we can't find \""+t+'"')}}});l.inputText=h;for(var g=0;g<l.config.options.maxVisibleOptions;g++){var f=new J(a,o(o({},l.config.options),{height:l.config.initialHeight,positionY:-l.config.initialHeight-l.config.initialHeight*g,color:g%2==0?l.config.options.oddBackgroundColor:a.color}));l.uiOptions.push(f)}var d=new UIImage(a,p);d.onClick=new OnClick((function(){return l.close()})),d.sourceTop=305,d.sourceLeft=985,d.sourceWidth=d.sourceHeight=35,d.width=d.height=18,d.hAlign="right",d.vAlign="top",d.positionX=-12,d.positionY=-12,d.visible=d.isPointerBlocker=!0;var b=new UIText(a);return b.height=20,b.visible=!1,b.width="92%",b.hTextAlign="center",b.vAlign="bottom",b.positionY=20,b.fontSize=l.config.errorMessage.fontSize,b.color=l.config.errorMessage.textColor,l.errorMessage=b,l}return i(e,t),e.prototype.open=function(){this.setProperties({visible:!0}),this.showDefaultOptions()},e.prototype.close=function(){this.setProperties({visible:!1}),this.inputText.reset()},e.prototype.setItems=function(t,e){this.options=t.reduce((function(t,e){var i;return e.searchBy=null!==(i=e.searchBy)&&void 0!==i?i:"string"==typeof e.visualText?e.visualText:"text"in e.visualText?e.visualText.text:e.visualText.topLeft,t[e.id]=e,t}),{}),e?this.setDropdownDefaults(e):this.defaultOptions=e,this.hideAllOptions()},e.prototype.setDropdownDefaults=function(t){var e,i;try{for(var o=r(t),n=o.next();!n.done;n=o.next()){var s=n.value;if(!(s in this.options))return void error("Couldn't find an option with id '"+s+"'. Will not set new defaults")}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}this.defaultOptions=t},e.prototype.showDefaultOptions=function(){var t,e=this;if(this.defaultOptions)t=this.defaultOptions.map((function(t){return e.options[t]})).slice(0,this.config.options.maxVisibleOptions);else for(var i in t=[],this.options)if(t.push(this.options[i]),t.length===this.config.options.maxVisibleOptions)break;this.showOptions(t)},e.prototype.showOptions=function(t){var e=this;this.resizeHeight(this.config.initialHeight*t.length+2*this.config.borderSize),t.forEach((function(t,i){var o=e.uiOptions[i];o.setOption(t,(function(){e.onSuccessfulSelection(t),e.setProperties({visible:!1})})),o.setProperties({visible:!0})})),this.errorMessage.visible=!1},e.prototype.hideAllOptions=function(){this.uiOptions.forEach((function(t){return t.setProperties({visible:!1})}))},e.prototype.showErrorMessage=function(t){this.errorMessage.visible=!0,this.errorMessage.value=t,this.resizeHeight(60)},e.prototype.resizeHeight=function(t){this.setProperties({height:this.config.initialHeight+t}),this.insideContainer.height=this.config.initialHeight+t-2*this.config.borderSize},e.DEFAULTS={borderColor:Color4.FromInts(232,236,253,255),backgroundColor:Color4.White(),borderSize:2,width:300,initialHeight:60,search:{fontSize:16,textColor:Color4.FromInts(24,26,70,255),placeholder:{defaultText:"Click to search",textColor:Color4.FromInts(118,120,181,200)}},options:{maxVisibleOptions:5,oddBackgroundColor:Color4.FromInts(246,246,255,255),topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},errorMessage:{fontSize:13,textColor:Color4.FromInts(125,127,157,255)}},e}(_),$=function(t){function e(e,i,r,s){var c=t.call(this,new UIContainerRect(e),o({},r))||this;c.onSuccessfulSelection=s,r.visible,r.opacity,r.hAlign,r.vAlign,r.positionX,r.positionY;var l=n(r,["visible","opacity","hAlign","vAlign","positionX","positionY"]);c.config=j(Z.DEFAULTS,l),c.setProperties({width:c.config.width,height:c.config.initialHeight,color:c.config.borderColor});var u=new M(c.shape,{color:c.config.backgroundColor,width:c.config.width-2*c.config.borderSize,height:c.config.initialHeight-2*c.config.borderSize,onClick:function(){return c.uiSearchPrompt.open()}}),a=new J(u.shape,o(o({},c.config.options),{height:c.config.initialHeight,color:Color4.Clear(),width:c.config.width-2*c.config.borderSize-20,visible:!0,hAlign:"left",isPointerBlocker:!1})),h=new UIText(u.shape);if(h.value="Click to select an option",h.fontSize=c.config.search.fontSize,h.color=c.config.search.placeholder.textColor,h.vTextAlign=h.hTextAlign="center",h.positionX=-c.config.borderSize-10,h.isPointerBlocker=!1,h.opacity=h.color.a,c.initialText=h,null==i?void 0:i.initialItemId){var p=i.items.filter((function(t){return t.id===i.initialItemId}))[0];p&&(a.setOption(p),c.initialText.visible=!1)}var g=new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN5AAADeQELGyzWAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlQTFRF////AAAAAAAAflGpXQAAAAJ0Uk5TAICbK04YAAAAeklEQVQ4je3PsRXEMAgE0VFCEapG9agaiiDRVXkJxlpq8IYT/AfwTbZ/ssPUEJgGZ2hYDTmgSIAiDoqsdskBRQIUcVBktXdO/jeVuBDPMBpRyEMUEhVMiUKKSOQlEokrmBKJXARsJWAqAaYEjEbAVgJmtGDewmjEt9wfISOqAUzY2sAAAAAASUVORK5CYII="),f=new UIImage(u.shape,g);return f.sourceWidth=f.sourceHeight=64,f.height=15,f.width=12,f.hAlign="right",f.vAlign="center",f.positionX=-10,f.visible=!0,f.isPointerBlocker=!1,c.uiSearchPrompt=new Z(c.shape,i,o(o({},r),{visible:!1,vAlign:"top",initialHeight:c.config.initialHeight-2*c.config.borderSize}),(function(t){a.setOption(t),c.initialText.visible=!1,c.onSuccessfulSelection(t)})),c}return i(e,t),e.prototype.open=function(){this.setProperties({visible:!0})},e.prototype.close=function(){this.setProperties({visible:!1})},e.prototype.setSearchItems=function(t,e){this.uiSearchPrompt.setItems(t,e)},e.prototype.setSearchDropdownDefaults=function(t){this.uiSearchPrompt.setDropdownDefaults(t)},e}(_);t.CenterImage=W,t.CornerLabel=V,t.CustomPrompt=F,t.CustomPromptButton=P,t.CustomPromptCheckBox=N,t.CustomPromptIcon=Y,t.CustomPromptSwitch=X,t.CustomPromptText=z,t.CustomPromptTextBox=G,t.FillInPrompt=H,t.LargeIcon=U,t.LoadingIcon=Q,t.MediumIcon=B,t.OkPrompt=R,t.OptionPrompt=D,t.SFFont=a,t.SFHeavyFont=h,t.SmallIcon=O,t.UIBar=E,t.UICounter=T,t.UISearchPrompt=Z,t.UISelectBox=$,t.canvas=u,t.darkTheme=g,t.displayAnnouncement=function(t,e,i,o,n){f.visible=!0,f.value=t,f.color=i||Color4.Yellow(),f.fontSize=o||50,f.font=h,f.outlineColor=Color4.Black(),f.outlineWidth=n?0:.1,f.adaptWidth=!1,f.textWrapping=!0,f.width=900;var r=new Entity;engine.addEntity(r),-1!=e&&r.addComponentOrReplace(new s(e||3,(function(){f.visible=!1})))},t.hideAnnouncements=function(){f.visible=!1},t.lightTheme=p,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
